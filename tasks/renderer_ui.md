# Renderer UI 実装タスク

## 概要

React + TypeScript + Tailwind CSS による UI 実装タスク。モデル選択、入力欄、結果リスト、操作ボタン。

## タスク: モデル選択ドロップダウンを実装する

### 説明
preload 経由で `models:list` を呼び、取得失敗時はローカル `models.json` を表示。手動追加用の入力欄をモーダルで提供。

### DoD
- [ ] `models:list` 成功/失敗のUI分岐が実装されている
- [ ] ドロップダウンでモデルを選択できる
- [ ] 手動追加入力→ローカル保存が実装されている
- [ ] 型/バリデーションが実装されている
- [ ] ローディング状態が表示される

### API/IPC契約
- `ipc_contracts.md` の `ModelsListRequest`, `ModelsListResponse` を参照

### リスク/対策
- **リスク**: モデル一覧取得の失敗
- **対策**: フォールバック先の `models.json` を用意

### 見積/依存
- **見積**: 3時間
- **依存**: ipc_contracts.md, preload_bridge.md

### テスト観点
- モデル0件/大量件/失敗時フォールバックの動作確認

## タスク: 入力テキストエリアを実装する

### 説明
オリジナルのテキストを入力・編集するテキストエリアを実装する。

### DoD
- [ ] テキストエリアが実装されている
- [ ] 文字数カウントが表示される（最大2万字）
- [ ] 文字数上限のバリデーションが実装されている
- [ ] テキストが永続化される（electron-store）
- [ ] プレースホルダーが表示される

### API/IPC契約
- テキスト入力の保存は `store:set` を使用

### リスク/対策
- **リスク**: 長文入力時のパフォーマンス低下
- **対策**: デバウンス処理と仮想スクロール（必要時）

### 見積/依存
- **見積**: 2時間
- **依存**: persistence.md

### テスト観点
- 長文入力の動作確認
- 文字数カウントの正確性確認

## タスク: 整形ボタンとオプション設定を実装する

### 説明
整形実行ボタンとオプション設定（フィラー除去、段落推定、箇条書き化）を実装する。

### DoD
- [ ] 整形ボタンが実装されている
- [ ] オプション設定のチェックボックスが実装されている
- [ ] カスタム指示の入力欄が実装されている（オプション）
- [ ] ボタンの無効化状態が適切に管理されている
- [ ] ローディング状態が表示される

### API/IPC契約
- `ipc_contracts.md` の `LLMFormatRequest`, `FormatOptions` を参照

### リスク/対策
- **リスク**: 同時整形リクエストの多重送信
- **対策**: ボタンの無効化とリクエスト状態管理

### 見積/依存
- **見積**: 2時間
- **依存**: ipc_contracts.md

### テスト観点
- ボタンの連打防止確認
- オプション設定の動作確認

## タスク: 整形結果カードとコピー機能を実装する

### 説明
結果ごとに「コピー」「再整形」「削除」ボタン。コピーは `clipboard:copy` IPC。

### DoD
- [ ] 1クリックコピーが実装されている
- [ ] 履歴UIが下積みで新しい順に整列されている
- [ ] ショートカット対応（⌘/Ctrl+C）が実装されている
- [ ] コピー成功時のフィードバックが表示される
- [ ] 結果テキストの表示/折りたたみが実装されている

### API/IPC契約
- `ipc_contracts.md` の `ClipboardCopyRequest`, `ClipboardCopyResponse` を参照

### リスク/対策
- **リスク**: コピー操作の失敗
- **対策**: エラーハンドリングとユーザー通知

### 見積/依存
- **見積**: 3時間
- **依存**: ipc_contracts.md, main_process.md

### テスト観点
- 長文/多量/連打/フォーカス時ショートカット挙動の確認

## タスク: 再整形機能を実装する

### 説明
履歴アイテムから再整形を実行する機能を実装する。

### DoD
- [ ] 再整形ボタンが実装されている
- [ ] 元のテキストとオプションが復元される
- [ ] 再整形結果が新しい履歴アイテムとして追加される
- [ ] エラーハンドリングが実装されている

### API/IPC契約
- `ipc_contracts.md` の `LLMFormatRequest` を参照

### リスク/対策
- **リスク**: 再整形時の状態管理の複雑化
- **対策**: 状態管理の明確化とテスト

### 見積/依存
- **見積**: 2時間
- **依存**: ipc_contracts.md

### テスト観点
- 再整形の動作確認
- 状態管理の確認

## タスク: 履歴削除機能を実装する

### 説明
履歴アイテムを削除する機能を実装する。

### DoD
- [ ] 削除ボタンが実装されている
- [ ] 削除確認ダイアログが表示される（オプション）
- [ ] 履歴から削除される
- [ ] 永続化が更新される

### API/IPC契約
- `store:saveHistory` を使用して履歴を更新

### リスク/対策
- **リスク**: 誤削除
- **対策**: 削除確認ダイアログ（オプション）

### 見積/依存
- **見積**: 1時間
- **依存**: persistence.md

### テスト観点
- 削除操作の動作確認
- 永続化の更新確認

## タスク: 状態管理を実装する

### 説明
選択モデル、履歴、進行中リクエストの状態管理を実装する。

### DoD
- [ ] 選択モデルの状態が管理されている
- [ ] 履歴の状態が管理されている
- [ ] 進行中リクエストの状態が管理されている
- [ ] 状態の永続化が実装されている
- [ ] 状態のリセット機能が実装されている

### API/IPC契約
- React Context または Zustand などの状態管理ライブラリを使用

### リスク/対策
- **リスク**: 状態管理の複雑化
- **対策**: 状態管理ライブラリの使用と明確な責務分離

### 見積/依存
- **見積**: 3時間
- **依存**: persistence.md

### テスト観点
- 状態管理の動作確認
- 永続化の動作確認

## タスク: アクセシビリティとキーボード操作を実装する

### 説明
アクセシビリティ対応とキーボード操作を実装する。

### DoD
- [ ] ARIA ラベルが適切に設定されている
- [ ] キーボードナビゲーションが実装されている
- [ ] フォーカス管理が実装されている
- [ ] スクリーンリーダー対応が実装されている

### API/IPC契約
- キーボードショートカット:
  - `Tab`: フォーカス移動
  - `Enter`: 整形実行（フォーカス時）
  - `Esc`: モーダル閉じる

### リスク/対策
- **リスク**: アクセシビリティの不備
- **対策**: WAI-ARIA ガイドラインに準拠

### 見積/依存
- **見積**: 2時間
- **依存**: なし

### テスト観点
- キーボード操作の動作確認
- スクリーンリーダーでの動作確認

